
<header>
    <div>
        <p-selectButton [disabled]="isDisabled"  [options]="types" [(ngModel)]="selectedType"
                        (click)="selectedTypea1()"></p-selectButton>
        <em>共 <span>{{hcy_count}}</span>人</em>
    </div>
</header>
<div *ngIf="selectedType==1" class="clearfix">
    <div class="left fl">

        <table class="table">
            <thead>
            <tr>
                <td>序号</td>
                <td>姓名</td>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let personSign of tableList;let i=index" (click)="selectsheshi(personSign)" #defaultPerson [ngClass]="{'active':personSign==hcy}">
                <td>{{i+1}}</td>
                <td>{{personSign.mc}}</td>
            </tr>
            </tbody>

        </table>
    </div>




    <div class="right fl">
        <div class="header clearfix rl">
            <div class="fl headerTitle">设施详情</div>
            <ul class="fr  btnGrop" *ngIf="!isDisabled">
                <li class="fl" (click)="up()"><span class="img"><img src="assets/img/icon/arrow-back.png"
                                                                     alt=""></span>上一条
                </li>
                <li class="fl" (click)="down()"><span class="img"><img src="assets/img/icon/arrow-back .png"
                                                                       alt=""></span>下一条
                </li>

                <li class="fl" (click)="addsheshi()"><span class="img"><img src="assets/img/icon/jiahao.png"
                                                                            alt=""></span>增加
                </li>
                <li class="fl" (click)="delsheshi()"><span class="img"><img src="assets/img/icon/brush_fill.png"
                                                                            alt=""></span>删除
                </li>
                <li class="fl">
                    <div class="selectLi rl">
                        更多操作
                        <!--<span class="xiala"></span>-->
                        <!--<div class="fj">-->
                        <!--<span (click)="openFj()">附件查看</span>-->
                        <!--<span>附件管理</span>-->
                        <!--</div>-->
                    </div>
                </li>
            </ul>
        </div>

        <div class="box_botton clearfix" *ngIf="tableList.length>0 && tableList[0]">
            <form #person="ngForm" >
                <div class="inputBox  rl fl">
                    <div class="input_left fl importent">
                        名称
                    </div>
                    <div class="input_right fl">
                        <input type="text" class="inputH" value="" [(ngModel)]="hcy.mc" name="mc">
                    </div>

                </div>


                <div class="inputBox  rl fl">
                    <div class="input_left fl importent">
                        权属人
                    </div>
                    <div class="input_right fl">
                        <app-select-list [disabled]="isDisabled"  [width]="0" [values]="selectPersonList"
                                         (SelectModel)="eventQsr($event)" [selectValue]="hcy.qsrId"
                                         ngDefaultControl></app-select-list>

                    </div>


                </div>

                <!--简单填写-->


                <!--左右点击选择-->

                <!--下拉框-->


                <div class="inputBox  rl fl areaBox">
                    <div class="input_left fl importent">
                        所在行政区划
                    </div>
                    <div class="input_right fl">
                        <input [disabled]="isDisabled" type="text" class="inputH" [(ngModel)]="hcy.localitydesc" name="szxzqhdm"
                               (click)="showAreaBlock()" readonly="readonly">
                        <i class="xiala" (click)="showAreaBlock()"></i>
                        <app-area-select [localityCode]="szxzqugldm" class="areaCommpont"
                                         [display]="isShowArea"
                                         (childEvent)="getChildSzxzqh($event)"></app-area-select>

                    </div>

                </div>
                <div class="inputBox  rl fl">
                    <div class="input_left fl importent">
                        专业大类
                    </div>
                    <div class="input_right fl">
                        <!--<app-select-list [width]="0" [values]="zydl_list"-->
                        <!--(SelectModel)="eventZydl($event)" [selectValue]="hcy.zydldm"></app-select-list>-->
                        <input [disabled]="isDisabled" type="text" class="inputH" [(ngModel)]="hcy.zydlmc" name="zydldm"
                               (click)="showZydlBlock()" readonly="readonly">
                        <i class="xiala" (click)="showZydlBlock()"></i>
                        <app-sec-type-list (SelectModel)="getChildZydl($event)" [isShow]="isShowZydl"
                                           [treeList]="zydlTreeList" [tableList]="zydlTableList"></app-sec-type-list>
                    </div>

                </div>
                <div class="inputBox  rl fl">
                    <div class="input_left fl importent">
                        调查范围
                    </div>
                    <div class="input_right fl">
                        <input [disabled]="isDisabled" type="text" class="inputH" [(ngModel)]="hcy.dcfwmc" name="dcfwdm"
                               (click)="showDcfwBlock()" readonly="readonly">
                        <i class="xiala" (click)="showDcfwBlock()"></i>
                        <app-sec-type-list (SelectModel)="getChildDcfw($event)" [treeList]="dcfwTreeList"
                                           [isShow]="isShowDcfw"
                                           [tableList]="dcfwTableList"></app-sec-type-list>

                    </div>


                </div>

                <div class="inputBox  rl fl">
                    <div class="input_left fl importent">
                        设施类别
                    </div>
                    <div class="input_right fl">
                        <input [disabled]="isDisabled" type="text" class="inputH" [(ngModel)]="hcy.sslbmc" name="sblbmc"
                               (click)="showsblbBlock()" readonly="readonly">
                        <i class="xiala" (click)="showsblbBlock()"></i>
                        <app-sec-type-list (SelectModel)="getChildsblb($event)" [treeList]="sblbTreeList"
                                           [isShow]="isShowSblb"
                                           [tableList]="sblbTableList"></app-sec-type-list>

                    </div>


                </div>

                <div class="inputBox  rl fl">
                    <div class="input_left fl importent">
                        数量
                    </div>
                    <div class="input_right fl">
                        <input type="number" class="inputH" [(ngModel)]="hcy.sl" name="sl" >
                    </div>

                </div>




                <div class="inputBox  rl fl">
                    <div class="input_left fl ">
                        结构
                    </div>
                    <div class="input_right fl">
                        <input type="text" class="inputH" [(ngModel)]="hcy.jg" name="jg"  >
                    </div>

                </div>


                <div class="inputBox  rl fl">
                    <div class="input_left fl ">
                        规格尺寸
                    </div>
                    <div class="input_right fl">
                        <input type="text" class="inputH" [(ngModel)]="hcy.ggcc" name="ggcc"  >
                    </div>

                </div>

                <div class="inputBox  rl fl">
                    <div class="input_left fl ">
                        设施原值
                    </div>
                    <div class="input_right fl input_right_dw">
                    <input [disabled]="isDisabled" name="ssyz" [(ngModel)]="hcy.ssyz" type="number">
                    </div>
                    <div class="fl mianji">
                        万元
                    </div>

                </div>



                <div class="inputBox  rl fl">
                    <div class="input_left fl ">
            占地面积
                    </div>
                    <div class="input_right fl input_right_dw">
                    <input [disabled]="isDisabled" name="zdmj" [(ngModel)]="hcy.zdmj" type="number">
                    </div>
                    <div class="fl mianji">
                        m²
                    </div>

                </div>


                <div class="inputBox  rl fl">
                    <div class="input_left fl ">
                        建设日期
                    </div>
                    <div class="input_right fl">
                        <app-p-calendar [disabled]="isDisabled" [disabled]="isDisabled" [value]="hcy.jsrq"
                                        (SelectModel)="eventJsrq($event)" readonly="readonly"></app-p-calendar>

                    </div>
                </div>


                <div class="inputBox  rl fl">
                    <div class="input_left fl ">
                        投产日期
                    </div>
                    <div class="input_right fl">
                        <app-p-calendar [disabled]="isDisabled" [disabled]="isDisabled" [value]="hcy.tcrq"
                                        (SelectModel)="eventTcrq($event)" readonly="readonly"></app-p-calendar>

                    </div>
                </div>

                <div class="inputBox  rl fl">
                    <div class="input_left fl ">
                        所在位置
                    </div>
                    <div class="input_right fl">
                        <input type="text" class="inputH" [(ngModel)]="hcy.szwz" name="szwz"  >
                    </div>

                </div>


                <div class="clearfix beizhu ">
                    <div class="textareaBeizhu">
                        <span>备注</span>
                    </div>
                    <textarea cols="30" rows="10" class="textarea" [(ngModel)]="hcy.bz" name="bz"></textarea>
                </div>
            </form>
        </div>
    </div>
</div>
<div *ngIf="selectedType==2">
    <div style="width:100%;height: 100%;margin-top: 15px">
        <p-dataTable [value]="tableList" scrollable="true" [(selection)]="tableSelecValue"
                     selectionMode="single" scrollHeight="500px" [editable]="true" (onNodeSelect)="nodeSelect($event)"

                     class="table" frozenWidth="200px" unfrozenWidth="calc(100% - 200px)" [frozenValue]="frozenCars"
                     bodyStyle="{'text-align':'center'}">
            <p-column field="mc" header="名称" frozen="true" [editable]="true">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id">
                            <input [disabled]="isDisabled" type="text" [(ngModel)]="node.mc" (ngModelChange)="tableChange()">
                        </div>
                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.mc}}
                        </div>
                    </div>
                    <div *ngIf="!tableSelecValue">
                        {{node.mc}}
                    </div>

                </ng-template>
            </p-column>
            <p-column field="qsrmc" header="权属人" frozen="true" [style]="{'width':'100px','height':'44px'}" >
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id">
                            <app-select-list [width]="0" [values]="selectPersonList" [selectValue]="node.qsrId"
                                             (SelectModel)="eventQsr($event)"></app-select-list>
                        </div>
                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.qsrmc}}
                        </div>
                    </div>
                    <div *ngIf="!tableSelecValue">
                        {{node.qsrmc}}
                    </div>
                </ng-template>
            </p-column>
            <p-column field="xzqhmc" [style]="{'width':'150px','height':'44px','overflow':'hidden'}">
                <ng-template pTemplate="header">
                    <span class="importent">所在行政区划</span>
                </ng-template>
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id">
                            <div class="tableClass"
                                 (click)="showSzxzqhBlock(i)" id="szxzqh" title="{{node.localitydesc}}">{{node.localitydesc}}
                            </div>

                        </div>
                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.localitydesc}}
                        </div>
                    </div>

                    <div *ngIf="!tableSelecValue">
                        {{node.localitydesc}}
                    </div>


                </ng-template>
            </p-column>
            <p-column field="zydlmc" header="专业大类" [style]="{'width':'150px','height':'30px','overflow':'hidden'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div (click)="showZydlBlock(i)" class="tableClass"
                         id="zydl" title="{{node.zydlmc}}">{{node.zydlmc}}
                    </div>
                </ng-template>
            </p-column>
            <p-column field="dcfwmc" header="调查范围" [style]="{'width':'150px','height':'30px','overflow':'hidden'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div (click)="showDcfwBlock(i)" class="tableClass"
                         id="dcfw" title="{{node.dcfwmc}}">{{node.dcfwmc}}
                    </div>
                </ng-template>

            </p-column>
            <p-column field="sslbmc" header="设施类别" [style]="{'width':'150px','height':'30px','overflow':'hidden'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div (click)="showsblbBlock(i)" class="tableClass"
                         id="sslb" title="{{node.sslbmc}}">{{node.sslbmc}}
                    </div>
                </ng-template>

            </p-column>
            <p-column field="sl" header="数量" [style]="{'width':'150px','height':'30px'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id">
                            <input [disabled]="isDisabled" type="text" [(ngModel)]="node.sl" (ngModelChange)="tableChange()">
                        </div>
                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.sl}}
                        </div>
                    </div>
                    <div *ngIf="!tableSelecValue">
                        {{node.sl}}
                    </div>

                </ng-template>
            </p-column>

            <p-column field="jg" header="结构" [style]="{'width':'150px','height':'30px'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id">
                            <input [disabled]="isDisabled" type="text" [(ngModel)]="node.jg" (ngModelChange)="tableChange()">
                        </div>
                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.jg}}
                        </div>
                    </div>
                    <div *ngIf="!tableSelecValue">
                        {{node.jg}}
                    </div>

                </ng-template>
            </p-column>
            <p-column field="ggcc" header="规格尺寸" [style]="{'width':'150px','height':'30px'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id">
                            <input [disabled]="isDisabled" type="text" [(ngModel)]="node.ggcc" (ngModelChange)="tableChange()">
                        </div>
                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.ggcc}}
                        </div>
                    </div>
                    <div *ngIf="!tableSelecValue">
                        {{node.ggcc}}
                    </div>

                </ng-template>
            </p-column>
            <p-column field="ssyz" header="设施原值" [style]="{'width':'150px','height':'30px'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id">
                            <input [disabled]="isDisabled" type="text" [(ngModel)]="node.sbyz" (ngModelChange)="tableChange()">
                        </div>
                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.sbyz}}
                        </div>
                    </div>
                    <div *ngIf="!tableSelecValue">
                        {{node.sbyz}}
                    </div>

                </ng-template>
            </p-column>
            <p-column field="zdmj" header="占地面积" [style]="{'width':'150px','height':'30px'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id">
                            <input [disabled]="isDisabled" type="text" [(ngModel)]="node.sbyz" (ngModelChange)="tableChange()">

                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.zdmj}}
                        </div>
                    </div>
                    <div *ngIf="!tableSelecValue">
                        {{node.zdmj}}
                    </div>
                    </div>
                </ng-template>
            </p-column>
            <p-column field="jsrq" header="建设日期" [style]="{'width':'150px','height':'30px'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id" style="margin-top: -15px">
                            <div class="tableClass" (click)="showJsrqBlock(i)"
                                 id="jsrq" title="{{node.jsrq | date:'yyyy-MM-dd'}}">{{node.jsrq | date:"yyyy-MM-dd"}}&nbsp;
                            </div>
                        </div>
                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.jsrq | date:"yyyy-MM-dd"}}
                        </div>
                    </div>
                    <div *ngIf="!tableSelecValue">
                        {{node.jsrq | date:"yyyy-MM-dd"}}
                    </div>

                </ng-template>
            </p-column>
            <p-column field="tcrq" header="投产日期" [style]="{'width':'150px','height':'30px'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id" style="margin-top: -15px">
                            <div class="tableClass" (click)="showTcrqBlock(i)"
                                 id="tcrq" title="{{node.tcrq | date:'yyyy-MM-dd'}}">{{node.tcrq | date:"yyyy-MM-dd"}}&nbsp;
                            </div>
                        </div>
                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.tcrq | date:"yyyy-MM-dd"}}
                        </div>
                    </div>
                    <div *ngIf="!tableSelecValue">
                        {{node.tcrq | date:"yyyy-MM-dd"}}
                    </div>

                </ng-template>
            </p-column>
            <p-column field="szwz" header="所在位置" [style]="{'width':'150px','height':'30px'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id">
                            <input [disabled]="isDisabled" type="text" [(ngModel)]="node.szwz" (ngModelChange)="tableChange()">

                            <div *ngIf="tableSelecValue.id!=node.id">
                                {{node.szwz}}
                            </div>
                        </div>
                        <div *ngIf="!tableSelecValue">
                            {{node.szwz}}
                        </div>
                    </div>
                </ng-template>
            </p-column>
            <p-column field="bz" header="备注" [style]="{'width':'150px','height':'30px','overflow':'hidden'}">
                <ng-template let-col let-node="rowData" pTemplate="body" let-i="rowIndex">
                    <div *ngIf="tableSelecValue">
                        <div *ngIf="tableSelecValue.id==node.id">
                            <input [disabled]="isDisabled" type="text" [(ngModel)]="node.bz" (ngModelChange)="tableChange()">
                        </div>
                        <div *ngIf="tableSelecValue.id!=node.id">
                            {{node.bz}}
                        </div>
                    </div>
                    <div *ngIf="!tableSelecValue">
                        {{node.bz}}
                    </div>
                </ng-template>
            </p-column>


        </p-dataTable>

        <div *ngIf="zzcModel" (click)="closeZzc()" class="ui-widget-overlay ui-dialog-mask"></div>
        <app-sec-type-list (SelectModel)="getChildZydl($event)" [isShow]="isShowZydl"
                           [ngStyle]="{'position':'absolute','left':zydlLeft,'top':zydlTop}"
                           [tableList]="zydlTableList" [treeList]="zydlTreeList">
        </app-sec-type-list>
        <app-sec-type-list (SelectModel)="getChildDcfw($event)" [isShow]="isShowDcfw"
                           [ngStyle]="{'position':'absolute','left':zydlLeft,'top':zydlTop}"
                           [tableList]="dcfwTableList" [treeList]="dcfwTreeList">
        </app-sec-type-list>

        <app-sec-type-list (SelectModel)="getChildsblb($event)" [isShow]="isShowSblb"
                           [ngStyle]="{'position':'absolute','left':zydlLeft,'top':zydlTop}"
                           [tableList]="sblbTableList" [treeList]="sblbTreeList">
        </app-sec-type-list>
        <app-area-select [localityCode]="ssxzqhSearchDm" class="areaCommpont"
                         [ngStyle]="{'position':'absolute','left':zydlLeft,'top':zydlTop}"
                         [display]="isShowArea" (childEvent)="getChildSzxzqh($event)"></app-area-select>
        <div *ngIf="isShowJsrq" [ngStyle]="{'position':'absolute','left':zydlLeft,'top':zydlTop}">
            <!--建设日期-->
            <p-calendar [inline]="true" [locale]="ch" (onSelect)="jsrqClickTime(value)"
                        [(ngModel)]="value"></p-calendar>
        </div>
        <div *ngIf="isShowTcrq" [ngStyle]="{'position':'absolute','left':zydlLeft,'top':zydlTop}">
            <!--投产日期-->
            <p-calendar [inline]="true" [locale]="ch" (onSelect)="tcrqClickTime(value)"
                        [(ngModel)]="value"></p-calendar>
        </div>




    </div>
</div>

